{% extends "base/public_base.html" %}
{% load compress static %}
{% load compile_static %}
{% load wagtailcore_tags %}
{% load wagtailroutablepage_tags %}
{% load wagtailimages_tags %}
{% block body_class %}template-{{ self.get_verbose_name|slugify }}{% endblock %}

 <!--  dev-note: h1 is within public_base from name of page - need to verify it pulls in the object name -->

{% block styles %}
  {% compress css %}
      <link href="{% static "/base/css/collex-digital.scss" %}" rel="stylesheet" type="text/x-scss"/>
  {% endcompress %}
{% endblock %}

{% block content %}
<!--   to-do: [ phase 2 ] add if statement for non-Universal viewer objects (eg: DMA) -->

	      <!-- dev-note: all items that need model information are in caps -->


      
      <div class="col-xs-12 col-md-9 centermain"> <!-- Center Content -->

          <!-- @todo Figure out responsive iFrame. Oddness happening with UV iFrame when rendered in browser.
               Ideal code:
               <div class="embed-responsive embed-responsive-16by9">
               <iframe class="embed-responsive-item" src="{{ iiif_url }}" allowfullscreen></iframe>
               </div> -->
          <iframe src="{{ iiif_url }}" width="750" height="600" allowfullscreen frameborder="0"></iframe>
	  <!-- <iframe src="https://liblet.lib.uchicago.edu/viewer?manifest=https://iiif-manifest-dev.lib.uchicago.edu/ark:61001/b2nd42r7xp0q" width="750" height="600" allowfullscreen frameborder="0"></iframe> -->

	  <script type="text/javascript">
	    const toggle = (elementID) => {
		let contentId = document.getElementById(elementID);
		if (contentId.style.display == "block") {
		    contentId.style.display = "none";
		}
		else {
		    contentId.style.display = "block";
		}
	    }
	    const updateCitation = (elemValue) => {
		const chiContent = "“Woodlawn community /”. n.d.. “Woodlawn community /”. 1 map. <https://repository.lib.uchicago.edu/digitalcollections/maps/chisoc>. Dept. of Sociology.";
		const apaContent = "<i>Map no. VII showing places of residence of 7541 alleged male offenders placed in the Cook County jail during the year 1920, 17-75 years of age /</i> [1 map]. (n.d.). <i>Map no. VII showing places of residence of 7541 alleged male offenders placed in the Cook County jail during the year 1920, 17-75 years of age /</i> [1 map]. University of Chicago Press.<br><i>Woodlawn Community /</i> [1 map]. (n.d.). <i>Woodlawn Community /</i> [1 map]. Dept. of Sociology.<br>";
		const mlaContent = "<i>Map no. VII showing places of residence of 7541 alleged male offenders placed in the cook county jail during the year 1920, 17-75 years of age /</i>. <i>Map no. VII showing places of residence of 7541 alleged male offenders placed in the cook county jail during the year 1920, 17-75 years of age /</i>. University of Chicago Press.<br><i>Woodlawn community /</i>. <i>Woodlawn community /</i>. Dept. of Sociology.<br>";
		if (elemValue == "chicago") {
		    document.getElementById("citationDisplay").innerHTML = chiContent;
		} else if (elemValue == "apa") {
		    document.getElementById("citationDisplay").innerHTML = apaContent;
		} else if (elemValue == "mla") {
		    document.getElementById("citationDisplay").innerHTML = mlaContent;
		} else {
		    () => {};
		}
	    }
	  </script>

                  <div class="col-xs-12 coll-dropdown">
                      <div class="btn-group">
			<a class="btn btn-textonly dropdown-toggle" href="javascript:toggle('hiddenCitation')">Cite this<span class="caret"></span></a>
                      </div>

                      <div class="btn-group">
                          <button aria-expanded="false" aria-haspopup="true" data-toggle="dropdown" class="btn btn-textonly dropdown-toggle" type="button">
                              <i class="fa fa-share-alt" aria-hidden="true"></i> Share this <span class="caret"></span>
                          </button>
                          <ul class="dropdown-menu listings-dropdown">
                              <li><a href="#" class="dropdown-item">Facebook</a></li>
                              <li><a href="#" class="dropdown-item">Twitter</a></li>
                              <li><a href="#" class="dropdown-item">Instagram</a></li>
                          </ul>
                      </div>
                  </div>

		  <div id="hiddenCitation" style="display: none;">
		      <form>
		      <input type="radio" id="chicago" name="styleButton" value="chicago" onchange="updateCitation(this.value)">
		      <label for="chistyle">Chicago Style</label>
		      <input type="radio" id="apa" name="styleButton" value="apa" onchange="updateCitation(this.value)">
		      <label for="apastyle">APA</label>
		      <input type="radio" id="mla" name="styleButton" value="mla" onchange="updateCitation(this.value)">
		      <label for="mlastyle">MLA</label>
		      </form>
		      <ul>
			<!--  dev-note: UnsUre if we want these hardwired into the html or to do a for loop and put the logic elsewhere -->

			<div id="citationDisplay">
			  “Woodlawn community /”. n.d.. “Woodlawn community /”. 1 map. <https://repository.lib.uchicago.edu/digitalcollections/maps/chisoc>. Dept. of Sociology.
			</div>
			
                        <li><a href="#">Save to BibTeX</a></li>
			<li><a href="*">Save to Endnote</a></li>
                      </ul>
		  </div>
		  
		  <span itemscope itemtype="http://schema.org/CreativeWork"> <!-- schema.org wrapper -->  
                      <dl>
			  {% for key, value in marklogic.items %}
			  <dt>
			      {{ key }}
			  </dt>
			  <!-- TODO: add SCHEMA.ORG property as itemprop in dd tag -->
			  <!-- TODO: add handling for if an item has multiple value fields -->
			  <!-- to-do: need to add better CSS handling for multiple value fields (multiple lines) -->
			  <dd>
			      {{ value }}
			  </dd>
			  {% endfor %}
                      </dl>
		  </span> <!-- / schema.org wrapper -->
    	      </div> <!-- // Center Content -->

{% endblock %}
      
{% block right_sidebar %}
{% include "includes/sidebar.html" %}
{% endblock %}

{% block right_sidebar_classes %}coll-rightside{% endblock %}

