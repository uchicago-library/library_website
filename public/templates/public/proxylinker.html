<input type="text" id="plink">
<input type="button" onclick="proxifyForm(plink)" value="proxify link">
<input type="button" onclick="copyLink(plink)" value="copy">

<script>
 const isProxyLink = (link) => {
     url = URL.parse(link);
     hostname = url.hostname ? url.hostname : null;
     return hostname == "proxy-redirector-test.lib.uchicago.edu";
 };

 const proxify = (link) => {
     const uri = encodeURIComponent (link.trim());
     const scheme = "https";
     const hostname = "proxy-redirector-test.lib.uchicago.edu";
     const route = "login";
     const querystring = "url=" + uri;
     const output = scheme + "://" + hostname + "/" + route + "?" + querystring;
     return isProxyLink (link) ? link : output;
 };

 const proxifyForm = (form) => {
     const link = form.value;
     form.value = proxify (link);
 };

 const copyLink = (form) => {
     form.select ();
     document.execCommand ("copy");
 };
</script>
