{% load wagtailcore_tags %}
{% load markdown_filters %}
{% load page_extras %}

{% if query %}
    <div class="question">
        <p><strong>Your Question</strong>:<br/>
            {{ query }}
        </p>
    </div>

    {% if result %}
        <div class="libbot-results">
            <div class="answer">
                <h3 class="answer-heading">Answer</h3>
                {{ result.answer|markdown_to_html }}
            </div>

            {% if result.sources %}
                <div class="well well-sm" role="region" aria-labelledby="sources-heading">
                    <h4 id="sources-heading" class="sr-only">Sources</h4>
                    <p><strong>Sources:</strong></p>
                    <ul class="list-unstyled" role="list">
                        {% for source in result.sources %}
                            <li role="listitem">
                                {% if source.title %}
                                    <a href="{% pageurl source %}">{{ source.title }}</a>
                                    <span class="text-muted"> â€” {{ source|page_type }}</span>
                                {% endif %}
                            </li>
                        {% endfor %}
                    </ul>
                </div>
            {% endif %}

        </div>
    {% else %}
        <div class="alert alert-info" role="alert">
            No results found for your query.
        </div>
    {% endif %}
{% endif %}
